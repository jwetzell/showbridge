{
  "$schema": "../schema/config.schema.json",
  "http": {
    "params": {
      "port": 3000
    },
    "triggers": [
      {
        "type": "regex",
        "params": {
          "patterns": ["^/send/udp$"],
          "properties": ["originalUrl"]
        },
        "actions": [
          { "type": "log", "enabled": true },
          {
            "type": "osc-output",
            "params": {
              "host": "127.0.0.1",
              "address": "/udp/input",
              "_args": ["${vars['udp_msg']}"],
              "port": 8001,
              "protocol": "udp"
            },
            "enabled": true
          }
        ],
        "enabled": true
      }
    ]
  },
  "ws": {
    "triggers": []
  },
  "osc": {
    "triggers": [
      {
        "type": "regex",
        "params": {
          "patterns": ["^.*$"],
          "properties": ["address"]
        },
        "actions": [
          {
            "type": "osc-output",
            "params": {
              "address": "/cue/3/start",
              "args": [],
              "host": "localhost",
              "port": 53000,
              "protocol": "tcp"
            },
            "enabled": true
          },
          {
            "type": "log",
            "enabled": true
          }
        ],
        "enabled": true
      }
    ]
  },
  "midi": {
    "triggers": [
      {
        "type": "midi-note-on",
        "params": {},
        "enabled": true,
        "actions": [
          {
            "type": "log",
            "enabled": true
          }
        ]
      }
    ]
  },
  "tcp": {
    "params": {
      "address": "0.0.0.0",
      "port": 8000
    },
    "triggers": [
      {
        "type": "sender",
        "params": {
          "address": "::1"
        },
        "actions": [
          {
            "type": "log",
            "enabled": true
          },
          {
            "type": "forward",
            "params": {
              "host": "localhost",
              "port": 8002,
              "protocol": "udp"
            },
            "enabled": true
          }
        ],
        "enabled": true
      }
    ]
  },
  "udp": {
    "params": {
      "address": "0.0.0.0",
      "port": 8000
    },
    "triggers": [
      {
        "type": "sender",
        "params": {
          "address": "127.0.0.1"
        },
        "actions": [
          {
            "type": "log",
            "enabled": true
          },
          {
            "type": "store",
            "params": {
              "key": "udp_msg",
              "_value": "${msg}"
            },
            "enabled": true
          },
          {
            "type": "midi-output",
            "params": {
              "status": "note_on",
              "channel": 1,
              "note": 60,
              "velocity": 100,
              "duration": 250
            },
            "enabled": true
          }
        ],
        "enabled": true
      }
    ]
  }
}
