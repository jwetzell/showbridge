{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "Config",
  "title": "Config File Schema",
  "description": "config JSON layout",
  "type": "object",
  "properties": {
    "http": {
      "title": "HTTP",
      "type": "object",
      "properties": {
        "params": {
          "type": "object",
          "properties": {
            "address": {
              "description": "Address to listen on defaults to 0.0.0.0",
              "type": "string",
              "default": "0.0.0.0"
            },
            "port": {
              "description": "TCP port to listen on (this will be the same port used for websocket connections",
              "type": "number",
              "minimum": 1,
              "maximum": 65535,
              "default": 3000,
              "examples": ["8000"]
            }
          },
          "required": ["port"],
          "additionalProperties": false
        },
        "triggers": {
          "description": "array of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerHTTPRequest" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerAny" }
            ]
          }
        }
      },
      "required": ["triggers", "params"],
      "additionalProperties": false
    },
    "ws": {
      "title": "WebSocket",
      "type": "object",
      "properties": {
        "triggers": {
          "description": "array of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerAny" }
            ]
          }
        }
      },
      "required": ["triggers"],
      "additionalProperties": false
    },
    "osc": {
      "title": "OSC",
      "type": "object",
      "properties": {
        "triggers": {
          "description": "array of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerOSCAddress" },
              { "$ref": "#/definitions/TriggerAny" }
            ]
          }
        }
      },
      "required": ["triggers"],
      "additionalProperties": false
    },
    "tcp": {
      "title": "TCP",
      "type": "object",
      "properties": {
        "params": {
          "type": "object",
          "properties": {
            "address": {
              "description": "Address to listen on defaults to 0.0.0.0",
              "type": "string",
              "default": "0.0.0.0",
              "examples": ["127.0.0.1"]
            },
            "port": {
              "description": "TCP port to listen on",
              "type": "number",
              "minimum": 1,
              "maximum": 65535,
              "default": 3000,
              "examples": ["8000"]
            }
          },
          "required": ["port"],
          "additionalProperties": false
        },
        "triggers": {
          "description": "array of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerAny" }
            ]
          }
        }
      },
      "required": ["triggers", "params"],
      "additionalProperties": false
    },
    "udp": {
      "title": "UDP",
      "type": "object",
      "properties": {
        "params": {
          "type": "object",
          "properties": {
            "address": {
              "description": "Address to listen on defaults to 0.0.0.0",
              "type": "string",
              "default": "0.0.0.0"
            },
            "port": {
              "description": "UDP port to listen on",
              "type": "number",
              "minimum": 1,
              "maximum": 65535,
              "default": 3000,
              "examples": ["8000"]
            }
          },
          "required": ["port"],
          "additionalProperties": false
        },
        "triggers": {
          "description": "array of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerAny" }
            ]
          }
        }
      },
      "required": ["triggers", "params"],
      "additionalProperties": false
    },
    "midi": {
      "title": "MIDI",
      "type": "object",
      "properties": {
        "params": {
          "type": "object",
          "properties": {
            "virtualInputName": {
              "title": "Virtual Input Name",
              "description": "Name of the virtual MIDI Input port",
              "type": "string"
            },
            "virtualOutputName": {
              "title": "Virtual Output Name",
              "description": "Name of the virtual MIDI Output port",
              "type": "string"
            }
          },
          "required": [],
          "additionalProperties": false
        },
        "triggers": {
          "description": "array of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerMIDINoteOff" },
              { "$ref": "#/definitions/TriggerMIDINoteOn" },
              { "$ref": "#/definitions/TriggerMIDIControlChange" },
              { "$ref": "#/definitions/TriggerMIDIPitchBend" },
              { "$ref": "#/definitions/TriggerMIDIProgramChange" },
              { "$ref": "#/definitions/TriggerAny" }
            ]
          }
        }
      },
      "required": ["triggers"],
      "additionalProperties": false
    },
    "mqtt": {
      "title": "MQTT",
      "type": "object",
      "properties": {
        "params": {
          "type": "object",
          "properties": {
            "broker": {
              "description": "mqtt broker url",
              "type": "string"
            },
            "username": {
              "description": "username for mqtt broker",
              "type": "string"
            },
            "password": {
              "description": "password for mqtt broker",
              "type": "string"
            },
            "topics": {
              "description": "list of topics to subscribe to",
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": []
            }
          },
          "required": ["broker", "topics"],
          "additionalProperties": false
        },
        "triggers": {
          "description": "array of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerMQTTTopiic" },
              { "$ref": "#/definitions/TriggerAny" }
            ]
          }
        }
      },
      "required": ["triggers", "params"],
      "additionalProperties": false
    },
    "cloud": {
      "title": "Cloud",
      "type": "object",
      "properties": {
        "params": {
          "type": "object",
          "properties": {
            "url": {
              "description": "cloud url",
              "type": "string"
            },
            "rooms": {
              "description": "list of rooms to join",
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        }
      },
      "required": ["params"],
      "additionalProperties": false
    }
  },
  "required": ["http", "ws", "osc", "midi", "tcp", "udp", "mqtt"],
  "definitions": {
    "ActionList": {
      "description": "Actions to be performed if this trigger is fired",
      "type": "array",
      "items": {
        "type": "object",
        "oneOf": [
          { "$ref": "#/definitions/ActionLog" },
          { "$ref": "#/definitions/ActionStore" },
          { "$ref": "#/definitions/ActionMIDIOutput" },
          { "$ref": "#/definitions/ActionForward" },
          { "$ref": "#/definitions/ActionOSCOutput" },
          { "$ref": "#/definitions/ActionUDPOutput" },
          { "$ref": "#/definitions/ActionTCPOutput" },
          { "$ref": "#/definitions/ActionShell" },
          { "$ref": "#/definitions/ActionHTTPRequest" },
          { "$ref": "#/definitions/ActionMQTTOutput" },
          { "$ref": "#/definitions/ActionHTTPResponse" },
          { "$ref": "#/definitions/ActionCloudOutput" },
          { "$ref": "#/definitions/ActionDelay" },
          { "$ref": "#/definitions/ActionRandom" }
        ]
      }
    },
    "ActionLog": {
      "$schema": "http://json-schema.org/draft-07/schema",
      "title": "Log",
      "description": "This action logs out the incoming message",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "log"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled"],
      "additionalProperties": false
    },
    "ActionStore": {
      "$schema": "http://json-schema.org/draft-07/schema",
      "title": "Store",
      "description": "This action stores the configured value in a global vars object. Which will be made available when templating things.",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "store"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "Store action params",
          "type": "object",
          "properties": {
            "_key": {
              "title": "key",
              "description": "key of the variable to store ran through templating",
              "type": "string"
            },
            "key": {
              "description": "key of the variable to store",
              "type": "string"
            },
            "_value": {
              "title": "value",
              "description": "value of the variable to store ran through templating",
              "type": "string"
            },
            "value": {
              "description": "value of the variable to store",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "params", "enabled"],
      "additionalProperties": false
    },
    "ActionCloudOutput": {
      "$schema": "http://json-schema.org/draft-07/schema",
      "title": "Cloud Output",
      "description": "This action will send the incoming message to the specified cloud room",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "cloud-output"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "Cloud Output action params",
          "type": "object",
          "properties": {
            "rooms": {
              "description": "array of rooms to send the message to",
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": ["room1"]
            },
            "_rooms": {
              "title": "rooms",
              "description": "array of rooms to template and then send the message to",
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": ["${msg.prop1}"]
            }
          }
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "params", "enabled"],
      "additionalProperties": false
    },
    "ActionMIDIOutput": {
      "title": "MIDI Output",
      "description": "This action will output MIDI using raw MIDI data byte array",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "midi-output"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "MIDI output action params",
          "type": "object",
          "oneOf": [
            {
              "title": "MIDI Bytes",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "bytes": {
                  "description": "MIDI data to be sent as an array of 3 bytes",
                  "type": "array",
                  "items": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 255
                  },
                  "minItems": 2,
                  "maxItems": 3,
                  "examples": ["144"]
                }
              },
              "required": ["bytes"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Note Off Message",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "note_off"
                },
                "channel": {
                  "description": "MIDI channel number",
                  "type": "number",
                  "minimum": 1,
                  "maximum": 16,
                  "examples": ["1"]
                },
                "note": {
                  "description": "MIDI note value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 127,
                  "examples": ["60"]
                },
                "velocity": {
                  "description": "MIDI velocity value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 127,
                  "examples": ["127"]
                }
              },
              "required": ["status", "channel", "note", "velocity"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Note On Message",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "note_on"
                },
                "channel": {
                  "description": "MIDI channel number",
                  "type": "number",
                  "minimum": 1,
                  "maximum": 16,
                  "examples": ["1"]
                },
                "note": {
                  "description": "MIDI note value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 127,
                  "examples": ["60"]
                },
                "velocity": {
                  "description": "MIDI velocity value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 127,
                  "examples": ["127"]
                }
              },
              "required": ["status", "channel", "note", "velocity"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Polyphonic Aftertouch",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "polyphonic_aftertouch"
                },
                "channel": {
                  "description": "MIDI channel number",
                  "type": "number",
                  "minimum": 1,
                  "maximum": 16,
                  "examples": ["1"]
                },
                "note": {
                  "description": "MIDI note value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 127,
                  "examples": ["60"]
                },
                "pressure": {
                  "description": "MIDI pressure value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 127,
                  "examples": ["40"]
                }
              },
              "required": ["status", "channel", "note", "pressure"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Control Change",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "control_change"
                },
                "channel": {
                  "description": "MIDI channel number",
                  "type": "number",
                  "minimum": 1,
                  "maximum": 16,
                  "examples": ["1"]
                },
                "control": {
                  "description": "MIDI control value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 127,
                  "examples": ["7"]
                },
                "value": {
                  "description": "MIDI value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 127,
                  "examples": ["70"]
                }
              },
              "required": ["status", "control", "value"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Program Change",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "program_change"
                },
                "channel": {
                  "description": "MIDI channel number",
                  "type": "number",
                  "minimum": 1,
                  "maximum": 16,
                  "examples": ["1"]
                },
                "program": {
                  "description": "MIDI program value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 127,
                  "examples": ["10"]
                }
              },
              "required": ["status", "program"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Channel Aftertouch",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "channel_aftertouch"
                },
                "channel": {
                  "description": "MIDI channel number",
                  "type": "number",
                  "minimum": 1,
                  "maximum": 16,
                  "examples": ["1"]
                },
                "pressure": {
                  "description": "MIDI pressure value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 127,
                  "examples": ["60"]
                }
              },
              "required": ["status", "pressure"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Pitch Bend",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "pitch_bend"
                },
                "channel": {
                  "description": "MIDI channel number",
                  "type": "number",
                  "minimum": 1,
                  "maximum": 16,
                  "examples": ["1"]
                },
                "value": {
                  "description": "MIDI value",
                  "type": "number",
                  "minimum": 0,
                  "maximum": 16383,
                  "examples": ["7000"]
                }
              },
              "required": ["status", "value"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Start",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "start"
                }
              },
              "required": ["status"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Continue",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "continue"
                }
              },
              "required": ["status"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Stop",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "stop"
                }
              },
              "required": ["status"],
              "additionalProperties": false
            },
            {
              "title": "MIDI Reset",
              "type": "object",
              "properties": {
                "port": {
                  "description": "the MIDI port to send on",
                  "type": "string"
                },
                "_port": {
                  "title": "port",
                  "description": "JS template of the MIDI port to send on",
                  "type": "string"
                },
                "status": {
                  "description": "MIDI status value",
                  "type": "string",
                  "const": "reset"
                }
              },
              "required": ["status"],
              "additionalProperties": false
            }
          ],
          "required": []
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "ActionForward": {
      "title": "Forward",
      "description": "This action will forward the incoming message to the configured destination",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "forward"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "forward action params",
          "type": "object",
          "properties": {
            "host": {
              "description": "Hostname or address of the server to forward message to",
              "type": "string",
              "examples": ["127.0.0.1"]
            },
            "_host": {
              "title": "host",
              "description": "Template for the hostname or address of the server to forward message to",
              "type": "string",
              "examples": ["${msg.prop1}"]
            },
            "port": {
              "description": "Port to forward msg to",
              "type": "integer",
              "minimum": 1,
              "maximum": 65535,
              "examples": ["8000"]
            },
            "_port": {
              "title": "port",
              "description": "Template for the port to forward msg to",
              "type": "string"
            },
            "protocol": {
              "description": "Protocol to use when forwarding msg",
              "type": "string",
              "enum": ["udp", "tcp"]
            }
          },
          "required": ["protocol"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "ActionOSCOutput": {
      "title": "OSC Output",
      "description": "This action will send an OSC message to the configure address:port with the configured address and args",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "osc-output"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "OSC output action params",
          "type": "object",
          "properties": {
            "host": {
              "description": "Hostname or address of the server to send OSC to",
              "type": "string",
              "examples": ["127.0.0.1"]
            },
            "_host": {
              "title": "host",
              "description": "Template for the hostname or address of the server to forward message to",
              "type": "string",
              "examples": ["${msg.prop1}"]
            },
            "port": {
              "description": "Port to send OSC to",
              "type": "integer",
              "minimum": 1,
              "maximum": 65535,
              "examples": ["8000"]
            },
            "_port": {
              "title": "port",
              "description": "Template for the port to send on",
              "type": "string",
              "examples": ["${msg.prop1}"]
            },
            "protocol": {
              "description": "Protocol to use when sending OSC",
              "type": "string",
              "enum": ["udp", "tcp"]
            },
            "_address": {
              "title": "address",
              "description": "JS template of the OSC address. Will have access to the msg object to subsitute in properties of the message that triggered this action",
              "type": "string",
              "examples": ["${msg.prop1}"]
            },
            "address": {
              "description": "Hardcoded OSC address. _address has priority",
              "type": "string",
              "examples": ["/osc/address"]
            },
            "_args": {
              "title": "args",
              "description": "Array of args. Strings will be ran through the templating engine same as the _address param",
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": ["${msg.prop1}"]
            },
            "args": {
              "description": "Hardcoded array of OSC args",
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": ["arg1"]
            }
          },
          "required": ["protocol"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "ActionUDPOutput": {
      "title": "UDP Output",
      "description": "This action will send a UDP packet to the configured address:port with the configured contents",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "udp-output"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "UDP output action params",
          "type": "object",
          "oneOf": [
            {
              "title": "UDP Bytes",
              "properties": {
                "host": {
                  "description": "Hostname or address of the server to send UDP packet to",
                  "type": "string",
                  "examples": ["127.0.0.1"]
                },
                "_host": {
                  "title": "host",
                  "description": "Template for the hostname or address of the server to forward message to",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "port": {
                  "description": "Port to send UDP packet to",
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "examples": ["8000"]
                },
                "_port": {
                  "title": "port",
                  "description": "Template for the port to send msg on",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "bytes": {
                  "description": "bytes to send",
                  "type": "array",
                  "items": {
                    "type": "number"
                  },
                  "examples": ["215"]
                }
              },
              "required": ["bytes"],
              "additionalProperties": false
            },
            {
              "title": "UDP Hex",
              "properties": {
                "host": {
                  "description": "Hostname or address of the server to send UDP packet to",
                  "type": "string",
                  "examples": ["127.0.0.1"]
                },
                "_host": {
                  "title": "host",
                  "description": "Template for the hostname or address of the server to forward message to",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "port": {
                  "description": "Port to send UDP packet to",
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "examples": ["8000"]
                },
                "_port": {
                  "title": "port",
                  "description": "Template for the port to send msg on",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "hex": {
                  "description": "hex string to be sent as bytes (i.e 68 69, 6869, 0x68 0x69, 0x68,0x69)",
                  "type": "string",
                  "pattern": "^[0-9A-Fa-f\\sx,]+$",
                  "examples": ["0xdeadbeef"]
                }
              },
              "required": ["hex"],
              "additionalProperties": false
            },
            {
              "title": "UDP String",
              "properties": {
                "host": {
                  "description": "Hostname or address of the server to send UDP packet to",
                  "type": "string",
                  "examples": ["127.0.0.1"]
                },
                "_host": {
                  "title": "host",
                  "description": "Template for the hostname or address of the server to forward message to",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "port": {
                  "description": "Port to send UDP packet to",
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "examples": ["8000"]
                },
                "_port": {
                  "title": "port",
                  "description": "Template for the port to send msg on",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "_string": {
                  "title": "string",
                  "description": "string to send ran through templating engine",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "string": {
                  "description": "string to send",
                  "type": "string",
                  "examples": ["message"]
                }
              }
            }
          ]
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "ActionTCPOutput": {
      "title": "TCP Output",
      "description": "This action will send a TCP packet to the configured address:port with the configured contents",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "tcp-output"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "TCP output action params",
          "type": "object",
          "oneOf": [
            {
              "title": "TCP Bytes",
              "properties": {
                "host": {
                  "description": "Hostname or address of the server to send TCP packet to",
                  "type": "string",
                  "examples": ["127.0.0.1"]
                },
                "_host": {
                  "title": "host",
                  "description": "Template for the hostname or address of the server to forward message to",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "port": {
                  "description": "Port to send TCP packet to",
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "examples": ["8000"]
                },
                "_port": {
                  "title": "port",
                  "description": "Template for the port to send msg on",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "slip": {
                  "description": "whether to SLIP encode the TCP bytes",
                  "type": "boolean",
                  "default": true
                },
                "bytes": {
                  "description": "bytes to send",
                  "type": "array",
                  "items": {
                    "type": "number"
                  },
                  "examples": ["24, 25, 26"]
                }
              },
              "required": ["slip", "bytes"],
              "additionalProperties": false
            },
            {
              "title": "TCP Hex",
              "properties": {
                "host": {
                  "description": "Hostname or address of the server to send TCP packet to",
                  "type": "string",
                  "examples": ["127.0.0.1"]
                },
                "_host": {
                  "title": "host",
                  "description": "Template for the hostname or address of the server to forward message to",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "port": {
                  "description": "Port to send TCP packet to",
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "examples": ["8000"]
                },
                "_port": {
                  "title": "port",
                  "description": "Template for the port to send msg on",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "slip": {
                  "description": "whether to SLIP encode the TCP bytes",
                  "type": "boolean",
                  "default": true
                },
                "hex": {
                  "description": "hex string to be sent as bytes (i.e 68 69, 6869, 0x68 0x69, 0x68,0x69)",
                  "type": "string",
                  "pattern": "^[0-9A-Fa-f\\sx,]+$",
                  "examples": ["0x42"]
                }
              },
              "required": ["slip", "hex"],
              "additionalProperties": false
            },
            {
              "title": "TCP String",
              "properties": {
                "host": {
                  "description": "Hostname or address of the server to send TCP packet to",
                  "type": "string",
                  "examples": ["127.0.0.1"]
                },
                "_host": {
                  "title": "host",
                  "description": "Template for the hostname or address of the server to forward message to",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "port": {
                  "description": "Port to send TCP packet to",
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "examples": ["8000"]
                },
                "_port": {
                  "title": "port",
                  "description": "Template for the port to send msg on",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "slip": {
                  "description": "whether to SLIP encode the TCP bytes",
                  "type": "boolean",
                  "default": true
                },
                "_string": {
                  "title": "string",
                  "description": "string to send ran through templating engine",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "string": {
                  "description": "string to send",
                  "type": "string",
                  "examples": ["message"]
                }
              },
              "required": ["slip"]
            }
          ]
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "ActionShell": {
      "title": "Shell Command",
      "description": "This action will execute the configured shell command on the system that is running the router",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "shell"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "Shell action params",
          "type": "object",
          "properties": {
            "_command": {
              "title": "command",
              "description": "JS literal template of the shell command to run",
              "type": "string",
              "examples": ["${msg.prop1}"]
            },
            "command": {
              "description": "Shell command to run",
              "type": "string",
              "examples": ["touch hello.txt"]
            }
          }
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "ActionHTTPRequest": {
      "title": "HTTP Request",
      "description": "This command will make the configured http call",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "http-request"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "HTTP action params",
          "type": "object",
          "properties": {
            "method": {
              "description": "The HTTP method to use i.e GET, POST, PUT",
              "type": "string",
              "enum": ["get", "post", "put", "delete", "patch", "GET", "POST", "PUT", "DELETE", "PATCH"]
            },
            "_url": {
              "title": "url",
              "description": "JS literal template of the url. Will have access to the properties of the incoming message that triggered this action",
              "type": "string",
              "examples": ["${msg.prop1}"]
            },
            "url": {
              "description": "Url to call",
              "type": "string",
              "examples": ["https://example.com"]
            },
            "contentType": {
              "description": "Content-Type header value mainly useful for POST/PUT/PATCH",
              "type": "string",
              "examples": ["application/json"]
            },
            "_body": {
              "title": "body",
              "description": "JS literal template of the body. Will have access to the properties of the incoming message that triggered this action",
              "type": "string",
              "examples": ["${msg.prop1}"]
            },
            "body": {
              "description": "Body to include with the request",
              "type": "string",
              "examples": ["OK"]
            }
          },
          "required": ["method"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "ActionRandom": {
      "title": "Random",
      "description": "This action will execute a randomly selected action from the configured subactions",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "random"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "random action params",
          "type": "object",
          "properties": {
            "actions": {
              "description": "array of actions to randomly pick from",
              "type": "array",
              "$ref": "#/definitions/ActionList",
              "examples": ["YOU PROBABLY SHOULDN'T BE EDITING THIS"]
            }
          },
          "required": ["actions"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "ActionDelay": {
      "title": "Delay",
      "description": "This action will execute the configured actions after the configured amount of time",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "delay"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "description": "delay action params",
          "type": "object",
          "properties": {
            "duration": {
              "description": "time in ms to wait",
              "type": "number",
              "examples": ["3000"]
            },
            "actions": {
              "description": "array of actions to execute after delaying",
              "type": "array",
              "$ref": "#/definitions/ActionList",
              "examples": ["YOU PROBABLY SHOULDN'T BE EDITING THIS"]
            }
          },
          "required": ["duration", "actions"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "ActionMQTTOutput": {
      "title": "MQTT Output",
      "description": "This action publishes an MQTT message",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "mqtt-output"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "type": "object",
          "properties": {
            "_topic": {
              "title": "topic",
              "description": "the templated MQTT topic to publish the message to",
              "type": "string",
              "examples": ["${msg.prop1}"]
            },
            "topic": {
              "description": "the static MQTT topic to publish the message to",
              "type": "string",
              "examples": ["topic/1"]
            },
            "_payload": {
              "title": "payload",
              "description": "the templated payload of the mqtt message",
              "type": "string",
              "examples": ["${msg.prop1}"]
            },
            "payload": {
              "description": "the static payload of the mqtt message",
              "type": "string",
              "examples": ["payload"]
            }
          },
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "params", "enabled"],
      "additionalProperties": false
    },

    "ActionHTTPResponse": {
      "title": "HTTP Response",
      "description": "This action responds to the incoming http request",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "http-response"
        },
        "comment": {
          "type": "string"
        },
        "transforms": {
          "$ref": "#/definitions/TransformList"
        },
        "params": {
          "type": "object",
          "oneOf": [
            {
              "title": "String Body",
              "properties": {
                "_body": {
                  "title": "body",
                  "description": "the templated body of the HTTP response",
                  "type": "string",
                  "examples": ["<h1>${msg.originalURL}</h1>"]
                },
                "body": {
                  "title": "body",
                  "description": "the body of the HTTP response",
                  "type": "string",
                  "examples": ["<h1>Hello World!</h1>"]
                },
                "contentType": {
                  "title": "content type",
                  "type": "string",
                  "default": "text/plain",
                  "enum": [
                    "text/plain",
                    "text/html",
                    "text/csv",
                    "application/json",
                    "application/pdf",
                    "image/jpeg",
                    "image/png",
                    "audio/wav",
                    "audio/webm",
                    "video/mp4",
                    "video/mpeg",
                    "video/webm"
                  ]
                }
              },
              "additionalProperties": false
            },
            {
              "title": "File Body",
              "properties": {
                "path": {
                  "description": "path to the file that will be read and returned",
                  "type": "string",
                  "examples": ["/tmp/file.txt"]
                },
                "_path": {
                  "title": "path",
                  "description": "path to the file that will be read and returned",
                  "type": "string",
                  "examples": ["${msg.prop1}"]
                },
                "contentType": {
                  "title": "content type",
                  "type": "string",
                  "default": "text/plain",
                  "enum": [
                    "text/plain",
                    "text/html",
                    "text/csv",
                    "application/json",
                    "application/pdf",
                    "image/jpeg",
                    "image/png",
                    "audio/wav",
                    "audio/webm",
                    "video/mp4",
                    "video/mpeg",
                    "video/webm"
                  ]
                }
              },
              "required": ["contentType"],
              "additionalProperties": false
            }
          ]
        },

        "enabled": {
          "description": "Whether this action is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "params", "enabled"],
      "additionalProperties": false
    },

    "TriggerList": {
      "description": "List of triggers",
      "type": "array",
      "items": {
        "type": "object",
        "oneOf": [
          { "$ref": "#/definitions/TriggerAny" },
          { "$ref": "#/definitions/TriggerRegex" },
          { "$ref": "#/definitions/TriggerSender" },
          { "$ref": "#/definitions/TriggerBytesEqual" },
          { "$ref": "#/definitions/TriggerHTTPRequest" },
          { "$ref": "#/definitions/TriggerMIDINoteOff" },
          { "$ref": "#/definitions/TriggerMIDINoteOn" },
          { "$ref": "#/definitions/TriggerMIDIControlChange" },
          { "$ref": "#/definitions/TriggerMIDIPitchBend" },
          { "$ref": "#/definitions/TriggerMIDIProgramChange" },
          { "$ref": "#/definitions/TriggerMQTTTopiic" }
        ]
      }
    },

    "TriggerAny": {
      "title": "Any",
      "description": "This trigger will match any message",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "any"
        },
        "comment": {
          "type": "string"
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "$ref": "#/definitions/TriggerList"
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled"],
      "additionalProperties": false
    },

    "TriggerOSCAddress": {
      "title": "OSC Address",
      "description": "This trigger will match osc messages by address",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "osc-address"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "OSC trigger params",
          "type": "object",
          "properties": {
            "address": {
              "description": "OSC Address to match. Supports OSC 1.0 address patterns spec *,?,{string1,string2},[a-z],[!a-z]",
              "type": "string",
              "examples": ["/address/to/match"]
            }
          },
          "required": ["address"],
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "description": "List of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerAny" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerOSCAddress" }
            ]
          }
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },

    "TriggerHTTPRequest": {
      "title": "HTTP Request",
      "description": "This trigger will match http requests by method and/or path ",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "http-request"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "HTTP Request trigger params",
          "type": "object",
          "properties": {
            "path": {
              "description": "exact HTTP path to match",
              "type": "string",
              "examples": ["/test/index.html"]
            },
            "method": {
              "description": "The HTTP method to match i.e GET, POST, PUT",
              "type": "string",
              "enum": ["get", "post", "put", "delete", "patch", "GET", "POST", "PUT", "DELETE", "PATCH"]
            }
          },
          "required": [],
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "description": "List of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerAny" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerHTTPRequest" }
            ]
          }
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },

    "TriggerMQTTTopiic": {
      "title": "MQTT Topic",
      "description": "This trigger will match mqtt messages by topic",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "mqtt-topic"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "MQTT topic trigger params",
          "type": "object",
          "properties": {
            "topic": {
              "description": "MQTT topic to match. Supports MQTT topic wildcard patterns +,#",
              "type": "string",
              "examples": ["topic/to/match"]
            }
          },
          "required": ["topic"],
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "description": "List of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerAny" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerMQTTTopiic" }
            ]
          }
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },

    "TriggerSender": {
      "title": "Sender",
      "description": "This trigger will match messages by sender",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "sender"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "Sender trigger params",
          "type": "object",
          "properties": {
            "address": {
              "description": "Address of the server to match incoming messages against",
              "type": "string",
              "examples": ["127.0.0.1"]
            }
          },
          "required": ["address"],
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "$ref": "#/definitions/TriggerList"
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TriggerBytesEqual": {
      "title": "Bytes Equal",
      "description": "This trigger will match incoming messages bytes to the ones set in params property",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "bytes-equal"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "bytes equal trigger params",
          "type": "object",
          "properties": {
            "bytes": {
              "description": "Array of 3 bytes that will be matched to the incoming message",
              "type": "array",
              "items": {
                "type": "integer",
                "minimum": 0,
                "maximum": 255
              },
              "examples": ["10"]
            }
          },
          "required": ["bytes"],
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "$ref": "#/definitions/TriggerList"
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TriggerMIDINoteOff": {
      "title": "MIDI Note Off",
      "description": "The trigger will match incoming MIDI note off events",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "midi-note-off"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "MIDI note off trigger params",
          "type": "object",
          "properties": {
            "port": {
              "description": "name of the MIDI port to match against incoming messages",
              "type": "string"
            },
            "channel": {
              "description": "channel value to match against incoming the messages",
              "type": "number",
              "minimum": 1,
              "maximum": 16,
              "examples": ["1"]
            },
            "note": {
              "description": "Note value to match against incoming the messages",
              "type": "integer",
              "minimum": 0,
              "maximum": 127,
              "examples": ["60"]
            },
            "velocity": {
              "description": "Velocity value to match against the incoming message",
              "type": "integer",
              "minimum": 0,
              "maximum": 127,
              "examples": ["127"]
            }
          },
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "description": "List of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerAny" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerMIDINoteOff" },
              { "$ref": "#/definitions/TriggerMIDINoteOn" },
              { "$ref": "#/definitions/TriggerMIDIControlChange" },
              { "$ref": "#/definitions/TriggerMIDIPitchBend" },
              { "$ref": "#/definitions/TriggerMIDIProgramChange" }
            ]
          }
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TriggerMIDINoteOn": {
      "title": "MIDI Note On",
      "description": "The trigger will match incoming MIDI note on events",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "midi-note-on"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "MIDI note on trigger params",
          "type": "object",
          "properties": {
            "port": {
              "description": "name of the MIDI port to match against incoming messages",
              "type": "string"
            },
            "channel": {
              "description": "channel value to match against incoming the messages",
              "type": "number",
              "minimum": 1,
              "maximum": 16,
              "examples": ["1"]
            },
            "note": {
              "description": "note value to match against incoming the messages",
              "type": "integer",
              "minimum": 0,
              "maximum": 127,
              "examples": ["60"]
            },
            "velocity": {
              "description": "velocity value to match against the incoming message",
              "type": "integer",
              "minimum": 0,
              "maximum": 127,
              "examples": ["127"]
            }
          },
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "description": "List of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerAny" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerMIDINoteOff" },
              { "$ref": "#/definitions/TriggerMIDINoteOn" },
              { "$ref": "#/definitions/TriggerMIDIControlChange" },
              { "$ref": "#/definitions/TriggerMIDIPitchBend" },
              { "$ref": "#/definitions/TriggerMIDIProgramChange" }
            ]
          }
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TriggerMIDIControlChange": {
      "title": "MIDI Control Change",
      "description": "The trigger will match incoming MIDI control events",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "midi-control-change"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "MIDI control change trigger params",
          "type": "object",
          "properties": {
            "port": {
              "description": "name of the MIDI port to match against incoming messages",
              "type": "string"
            },
            "channel": {
              "description": "channel value to match against incoming the messages",
              "type": "number",
              "minimum": 1,
              "maximum": 16,
              "examples": ["1"]
            },
            "control": {
              "description": "control number to match against incoming the messages",
              "type": "integer",
              "minimum": 0,
              "maximum": 127,
              "examples": ["7"]
            },
            "value": {
              "description": "control value to match against the incoming message",
              "type": "integer",
              "minimum": 0,
              "maximum": 127,
              "examples": ["60"]
            }
          },
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "description": "List of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerAny" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerMIDINoteOff" },
              { "$ref": "#/definitions/TriggerMIDINoteOn" },
              { "$ref": "#/definitions/TriggerMIDIControlChange" },
              { "$ref": "#/definitions/TriggerMIDIPitchBend" },
              { "$ref": "#/definitions/TriggerMIDIProgramChange" }
            ]
          }
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TriggerMIDIPitchBend": {
      "title": "MIDI Pitch Bend",
      "description": "The trigger will match incoming MIDI pitch bend events",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "midi-pitch-bend"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "MIDI pitch bend trigger params",
          "type": "object",
          "properties": {
            "port": {
              "description": "name of the MIDI port to match against incoming messages",
              "type": "string"
            },
            "channel": {
              "description": "channel value to match against incoming the messages",
              "type": "number",
              "minimum": 1,
              "maximum": 16,
              "examples": ["1"]
            },
            "value": {
              "description": "control value to match against the incoming message",
              "type": "integer",
              "minimum": 0,
              "maximum": 16384,
              "examples": ["9000"]
            }
          },
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "description": "List of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerAny" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerMIDINoteOff" },
              { "$ref": "#/definitions/TriggerMIDINoteOn" },
              { "$ref": "#/definitions/TriggerMIDIControlChange" },
              { "$ref": "#/definitions/TriggerMIDIPitchBend" },
              { "$ref": "#/definitions/TriggerMIDIProgramChange" }
            ]
          }
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TriggerMIDIProgramChange": {
      "title": "MIDI Program Change",
      "description": "The trigger will match incoming MIDI program events",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "midi-program-change"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "MIDI program change trigger params",
          "type": "object",
          "properties": {
            "port": {
              "description": "name of the MIDI port to match against incoming messages",
              "type": "string"
            },
            "channel": {
              "description": "channel value to match against incoming the messages",
              "type": "number",
              "minimum": 1,
              "maximum": 16,
              "examples": ["1"]
            },
            "program": {
              "description": "program number to match against incoming the messages",
              "type": "integer",
              "minimum": 0,
              "maximum": 127,
              "examples": ["10"]
            }
          },
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "description": "List of triggers",
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              { "$ref": "#/definitions/TriggerAny" },
              { "$ref": "#/definitions/TriggerRegex" },
              { "$ref": "#/definitions/TriggerSender" },
              { "$ref": "#/definitions/TriggerBytesEqual" },
              { "$ref": "#/definitions/TriggerMIDINoteOff" },
              { "$ref": "#/definitions/TriggerMIDINoteOn" },
              { "$ref": "#/definitions/TriggerMIDIControlChange" },
              { "$ref": "#/definitions/TriggerMIDIPitchBend" },
              { "$ref": "#/definitions/TriggerMIDIProgramChange" }
            ]
          }
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TriggerRegex": {
      "title": "Regex",
      "description": "This trigger will match the incoming message properties to the regex patterns 1:1",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "regex"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "Regex trigger params",
          "type": "object",
          "properties": {
            "patterns": {
              "description": "an array of regex patterns",
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": [".*"]
            },
            "properties": {
              "description": "an array of properties on the msg to match the regex patterns to 1:1",
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": ["prop1"]
            }
          },
          "required": ["patterns", "properties"],
          "additionalProperties": false
        },
        "actions": {
          "$ref": "#/definitions/ActionList"
        },
        "subTriggers": {
          "$ref": "#/definitions/TriggerList"
        },
        "enabled": {
          "description": "Whether this trigger is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },

    "TransformList": {
      "description": "Transforms to be performed",
      "type": "array",
      "items": {
        "type": "object",
        "oneOf": [
          { "$ref": "#/definitions/TransformScale" },
          { "$ref": "#/definitions/TransformRound" },
          { "$ref": "#/definitions/TransformFloor" },
          { "$ref": "#/definitions/TransformLog" },
          { "$ref": "#/definitions/TransformPower" },
          { "$ref": "#/definitions/TransformMap" },
          { "$ref": "#/definitions/TransformTemplate" }
        ]
      }
    },

    "TransformScale": {
      "title": "Scale",
      "description": "This transform will scale the incoming message property",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "scale"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "Scale transform params",
          "type": "object",
          "properties": {
            "property": {
              "description": "the property of the incoming message to scale",
              "type": "string",
              "examples": ["prop1"]
            },
            "inRange": {
              "description": "the range of the incoming numbers i.e [0,100]",
              "type": "array",
              "items": {
                "type": "number"
              },
              "minItems": 2,
              "maxItems": 2,
              "examples": ["0"]
            },
            "outRange": {
              "description": "the range of the outgoing numbers i.e [1,10]",
              "type": "array",
              "items": {
                "type": "number"
              },
              "minItems": 2,
              "maxItems": 2,
              "examples": ["0"]
            }
          },
          "required": ["property", "inRange", "outRange"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this transform is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TransformRound": {
      "title": "Round",
      "description": "This transform will round the incoming message property",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "round"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "Round transform params",
          "type": "object",
          "properties": {
            "property": {
              "description": "the property of the incoming message to round",
              "type": "string",
              "examples": ["prop1"]
            }
          },
          "required": ["property"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this transform is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TransformFloor": {
      "title": "Floor",
      "description": "This transform will floor the incoming message property",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "floor"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "Floor transform params",
          "type": "object",
          "properties": {
            "property": {
              "description": "the property of the incoming message to floor",
              "type": "string",
              "examples": ["prop1"]
            }
          },
          "required": ["property"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this transform is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TransformLog": {
      "title": "Log",
      "description": "This transform will take the log of the incoming message property",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "log"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "Log transform params",
          "type": "object",
          "properties": {
            "property": {
              "description": "the property of the incoming message",
              "type": "string",
              "examples": ["prop1"]
            },
            "base": {
              "description": "the log base",
              "type": "number",
              "examples": ["10"]
            }
          },
          "required": ["property", "base"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this transform is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TransformPower": {
      "title": "Power",
      "description": "This transform will take the configured power of the incoming message property",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "power"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "Power transform params",
          "type": "object",
          "properties": {
            "property": {
              "description": "the property of the incoming message that will be used as the base of the exponent",
              "type": "string",
              "examples": ["prop1"]
            },
            "exponent": {
              "description": "the exponent to raise the property value to",
              "type": "number",
              "examples": ["3"]
            }
          },
          "required": ["property", "exponent"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this transform is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TransformMap": {
      "title": "Map",
      "description": "This transform will map the incoming message property",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "map"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "map transform params",
          "type": "object",
          "properties": {
            "property": {
              "description": "the property of the incoming message to map",
              "type": "string",
              "examples": ["prop1"]
            },
            "map": {
              "description": "key:value object to lookup the property value in and the resulting value to map it to",
              "type": "object",
              "examples": ["{1:\"one\",2:\"two\"}"]
            }
          },
          "required": ["property", "map"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this transform is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    },
    "TransformTemplate": {
      "title": "Template",
      "description": "This transform will template the incoming message property",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "template"
        },
        "comment": {
          "type": "string"
        },
        "params": {
          "description": "Template transform params",
          "type": "object",
          "properties": {
            "property": {
              "description": "the property of the incoming message to populate",
              "type": "string",
              "examples": ["prop1"]
            },
            "template": {
              "description": "the template whose result will replace the property value. will have access to the msg object",
              "type": "string",
              "examples": ["modified-${msg.prop1}"]
            }
          },
          "required": ["property", "template"],
          "additionalProperties": false
        },
        "enabled": {
          "description": "Whether this transform is enabled",
          "type": "boolean",
          "default": true
        }
      },
      "required": ["type", "enabled", "params"],
      "additionalProperties": false
    }
  }
}
