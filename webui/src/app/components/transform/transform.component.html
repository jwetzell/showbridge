<ng-container *ngIf="transform && schema">
  <div
    class="flex items-center w-auto p-1 m-2 transform bg-gray-800 border-2 {{
      isInError() ? 'border-red-500' : 'border-gray-200'
    }} border-solid"
    [style.opacity]="this.transform.enabled ? '1.0' : '0.5'"
    [cdkContextMenuTriggerFor]="transformContextMenu">
    <div class="flex items-center justify-center">
      <mat-icon appearance="fill" class="scale-50" [style.color]="indicatorColor"> circle </mat-icon>
    </div>
    <div class="flex-auto text-gray-200" [matTooltip]="transform.comment ? transform.comment : ''">
      {{ schema.title }}
    </div>
  </div>

  <!-- NOTE(jwetzell): Settings Dialog -->
  <ng-template #settingsDialogRef>
    <form [formGroup]="formGroup" class="h-full">
      <div class="m-2">
        <app-params-form
          [parentSchema]="schema"
          [data]="transform.params"
          [patchable]="true"
          (updated)="paramsUpdated($event)"></app-params-form>
        <div class="flex items-center justify-center">
          <div class="flex-auto">
            <mat-form-field subscriptSizing="dynamic" class="w-full">
              <mat-label>comment: </mat-label>
              <textarea matInput type="text" formControlName="comment"></textarea>
            </mat-form-field>
          </div>
        </div>
      </div>
    </form>
  </ng-template>

  <!-- NOTE(jwetzell): Context Menus -->
  <ng-template #transformContextMenu>
    <div cdkMenu class="flex flex-col bg-gray-600 border border-black border-solid">
      <div
        cdkMenuItem
        class="px-2 border border-gray-700 select-none hover:bg-gray-500 hover:cursor-pointer"
        (click)="openSettingsDialog()">
        Settings
      </div>
      <div cdkMenuItem class="px-2 border border-gray-700 hover:bg-red-500 hover:cursor-pointer" (click)="deleteMe()">
        Delete
      </div>
      <div cdkMenuItem class="px-2 border border-gray-700 hover:bg-green-500 hover:cursor-pointer" (click)="copyMe()">
        Copy
      </div>
      <div
        cdkMenuItem
        class="px-2 border border-gray-700 hover:bg-green-500 hover:cursor-pointer"
        (click)="toggleEnabled()">
        {{ transform.enabled ? 'Disable' : 'Enable' }}
      </div>
    </div>
  </ng-template>
</ng-container>
