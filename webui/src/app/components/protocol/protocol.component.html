<ng-container *ngIf="protocolType && protocol">
  <div class="flex flex-col h-full">
    <div>
      <app-protocol-form
        [type]="protocolType"
        [data]="protocol"
        (updated)="protocolUpdated($event)"></app-protocol-form>
    </div>
    <div class="flex-auto" cdkDropList (cdkDropListDropped)="drop($event)">
      <div cdkDrag *ngFor="let trigger of protocol.triggers; let i = index">
        <app-trigger
          [path]="protocolType + '/triggers/' + i"
          [trigger]="trigger"
          (delete)="deleteTrigger(i)"
          (updated)="triggerUpdated(i, $event)"></app-trigger>
      </div>
    </div>
    <div>
      <ng-container *ngIf="triggerTypes.length > 0">
        <div
          class="w-full flex justify-center items-center hover:cursor-pointer hover:bg-gray-500 bg-gray-700"
          [matMenuTriggerFor]="addTriggerMenu">
          <mat-icon>add</mat-icon>
        </div>
        <mat-menu #addTriggerMenu="matMenu">
          <button mat-menu-item *ngFor="let triggerType of triggerTypes" (click)="addTrigger(triggerType.type)">
            <span>{{ triggerType.name }}</span>
          </button>
        </mat-menu>
      </ng-container>
    </div>
  </div>
</ng-container>
