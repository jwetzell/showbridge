<ng-container *ngIf="protocolType && protocol">
  <div class="flex flex-col">
    <div>
      <app-protocol-form
        [type]="protocolType"
        [data]="protocol"
        (updated)="protocolUpdated($event)"></app-protocol-form>
    </div>
    <div cdkDropList (cdkDropListDropped)="drop($event)">
      <div cdkDrag *ngFor="let trigger of protocol.triggers; let i = index">
        <div class="h-10 m-4 bg-gray-200 rounded-xl" *cdkDragPlaceholder></div>
        <app-trigger
          [path]="protocolType + '/triggers/' + i"
          [trigger]="trigger"
          (delete)="deleteTrigger(i)"
          (updated)="triggerUpdated(i, $event)"></app-trigger>
      </div>
      <ng-container *ngIf="triggerTypes.length > 0">
        <button class="w-full mt-2 bg-gray-700" [matMenuTriggerFor]="addTriggerMenu">
          <mat-icon>add</mat-icon>
        </button>
        <mat-menu #addTriggerMenu="matMenu">
          <button mat-menu-item *ngFor="let triggerType of triggerTypes" (click)="addTrigger(triggerType.type)">
            <span>{{ triggerType.name }}</span>
          </button>
        </mat-menu>
      </ng-container>
    </div>
  </div>
</ng-container>
