<ng-container *ngIf="trigger">
  <div class="flex">
    <div class="flex flex-col my-3 ml-5 bg-gray-900 border-2 border-black border-solid trigger w-fit">
      <div class="ml-2 text-gray-500">{{ trigger.type }}</div>
      <div class="flex-auto m-2">
        <app-object-form
          [objectType]="'Trigger'"
          [type]="trigger.type"
          [data]="trigger"
          (updated)="update($event)"></app-object-form>
      </div>
      <mat-icon (click)="deleteMe()" class="text-red-500 hover:cursor-pointer">delete</mat-icon>
    </div>
    <div class="mt-8">
      <mat-icon [style.color]="indicatorColor" class="scale-150">arrow_right</mat-icon>
    </div>
    <div>
      <div cdkDropList (cdkDropListDropped)="drop($event)" class="flex flex-col">
        <div cdkDrag *ngFor="let action of trigger.actions; let i = index">
          <app-action
            [path]="path + '/actions/' + i"
            [action]="action"
            (delete)="deleteAction(i)"
            (updated)="actionUpdated(i, $event)"></app-action>
        </div>
      </div>
      <div class="w-full" *ngIf="schemaService.actionTypes.length > 0">
        <button class="w-full bg-gray-700" [matMenuTriggerFor]="addActionMenu">
          <mat-icon>add</mat-icon>
        </button>
        <mat-menu #addActionMenu="matMenu">
          <button
            mat-menu-item
            *ngFor="let actionType of schemaService.actionTypes"
            (click)="addAction(actionType.type)">
            <span>{{ actionType.name }}</span>
          </button>
        </mat-menu>
      </div>
    </div>
  </div>
</ng-container>
